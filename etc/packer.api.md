## API Report File for "@ugdu/packer"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type { AliasOptions } from 'vite';
import type { Context } from '@ugdu/processor';
import type { InlineConfig } from 'vite';
import type { Merge } from 'type-fest';
import type { PackageNode } from 'dependencies-hierarchy';
import type { Promisable } from 'type-fest';
import { TaskOptions } from '@ugdu/processor';

// @public
export interface BaseRoute {
    // (undocumented)
    children?: BaseRoute[];
    component: string;
    id: string;
    // (undocumented)
    name: string;
    // (undocumented)
    path: string;
}

// @public
export const build: TaskOptions<SetConfigHooks & SetProjectHooks & BuildLocalModulesHooks & BuildRoutesModulesHooks & BuildVendorModulesHooks, never>;

// @public
export const buildEntry: TaskOptions<SetConfigHooks & SetProjectHooks, never>;

// Warning: (ae-internal-missing-underscore) The name "buildLocalModule" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export const buildLocalModule: (this: any, lmn: string, context: Context) => Promise<void>;

// @public
export const buildLocalModules: TaskOptions<SetConfigHooks & SetProjectHooks & BuildLocalModulesHooks, never>;

// @public (undocumented)
export interface BuildLocalModulesHooks {
    'build-local-module'(lmn: string, context: Context): Promisable<void>;
}

// @public (undocumented)
export const buildRoutesModule: TaskOptions<SetConfigHooks & SetProjectHooks & BuildRoutesModulesHooks, never>;

// @public (undocumented)
export interface BuildRoutesModulesHooks {
    // (undocumented)
    'build-routes-module'(context: Context): Promisable<void>;
}

// Warning: (ae-internal-missing-underscore) The name "buildVendorModule" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export const buildVendorModule: (vvn: string, context: Context) => Promise<void>;

// @public (undocumented)
export const buildVendorModules: TaskOptions<SetConfigHooks & SetProjectHooks & BuildLocalModulesHooks & BuildVendorModulesHooks, never>;

// @public (undocumented)
export interface BuildVendorModulesHooks {
    // (undocumented)
    'build-vendor-module'(rmn: string, task: Context): Promisable<void>;
}

// @public (undocumented)
export interface ChangedSource {
    // (undocumented)
    path: string;
    // (undocumented)
    status: 'A' | 'M' | 'D';
}

// Warning: (ae-internal-missing-underscore) The name "Config" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export type Config = Merge<Required<UserConfig>, {
    apps: Required<UserAppConfig>[];
}>;

// Warning: (ae-internal-missing-underscore) The name "CONSTANTS" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export const CONSTANTS: {
    readonly META_JSON: "meta.json";
    readonly PACKAGE_JSON: "package.json";
    readonly BINDING_NAME_SEP: "$ugdu";
    readonly PACKAGE_NAME_SEP: "$ugdu";
    readonly VERSIONED_VENDOR_SEP: "@";
    readonly ROUTES: "routes";
    readonly ROUTES_INPUT: string;
    readonly VENDOR: "vendor";
    readonly VENDOR_INPUT: string;
    readonly ROOT: "root";
    readonly INDEX: "index";
};

// @internal (undocumented)
export type CONSTANTS = typeof CONSTANTS;

// Warning: (ae-internal-missing-underscore) The name "getAliasKey" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export const getAliasKey: (this: any, lpn: string) => string;

// Warning: (ae-internal-missing-underscore) The name "getPkgId" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export const getPkgId: (this: any, lpn: string) => string;

// Warning: (ae-internal-missing-underscore) The name "getPkgs" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export const getPkgs: (localPkgToDepsMap: LocalPkgToDepsMap, cwd: string) => PkgNode[];

// Warning: (ae-internal-missing-underscore) The name "LocalPkgToDepsMap" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal (undocumented)
export type LocalPkgToDepsMap = Map<PkgNode, PackageNode[]>;

// @public
export interface Meta {
    // (undocumented)
    hash?: string;
    modules: MetaModule[];
    // (undocumented)
    version?: string;
}

// @public
export interface MetaModule {
    css?: string;
    exports?: string[];
    externals?: string[];
    id: string;
    imports: MetaModuleImport[];
    js: string;
    sources?: string[];
}

// @public (undocumented)
export interface MetaModuleImport {
    bindings: string[];
    id: string;
    name: string;
}

// @public (undocumented)
export interface PkgNode {
    ap: string;
    dependencies: PkgNode[];
    dependents: PkgNode[];
    local: boolean;
    main?: string;
    // (undocumented)
    name: string;
    path: string;
    // (undocumented)
    version: string;
}

// @public
export interface Project {
    alias: AliasOptions;
    meta: {
        pre: Meta;
        cur: Meta;
    };
    pkgs: PkgNode[];
    routes: BaseRoute[];
    sources: Sources;
}

// @public (undocumented)
export const serve: TaskOptions<SetConfigHooks & SetProjectHooks, never>;

// @public
export const setConfig: TaskOptions<SetConfigHooks, "get-config">;

// @public (undocumented)
export interface SetConfigHooks {
    'get-config'(): UserConfig | void;
}

// @public
export const setConstants: TaskOptions<{}, never>;

// @public
export const setContext: TaskOptions<SetConfigHooks & SetProjectHooks, never>;

// @public (undocumented)
export const setProject: TaskOptions<SetConfigHooks & SetProjectHooks, never>;

// @public (undocumented)
export interface SetProjectHooks {
    // (undocumented)
    'get-alias'(localPkgs: PkgNode[], context: Context): Promisable<AliasOptions>;
    // (undocumented)
    'get-all-packages'(localPkgs: PkgNode[], cwd: string): Promisable<PkgNode[]>;
    // (undocumented)
    'get-current-meta'(context: Context): Promisable<Meta>;
    // (undocumented)
    'get-local-packages'(cwd: string): Promisable<PkgNode[]>;
    // (undocumented)
    'get-previous-meta'(context: Context): Promisable<Meta>;
    // (undocumented)
    'get-routes'(context: Context): Promisable<BaseRoute[]>;
    // (undocumented)
    'get-sources'(context: Context): Promisable<Sources>;
}

// @public (undocumented)
export const setUtils: TaskOptions<SetConfigHooks, never>;

// @public (undocumented)
export interface Sources {
    // (undocumented)
    all: string[];
    // (undocumented)
    changed: ChangedSource[];
}

// @public (undocumented)
export interface UserAppConfig {
    name: string;
    packages: ((packages: PkgNode[]) => string[]) | string[];
    predicate?: (pathname: string) => boolean;
    vite?: InlineConfig;
}

// @public (undocumented)
export interface UserConfig {
    apps: UserAppConfig[];
    assets?: string;
    base?: string;
    cwd?: string;
    dist?: string;
    extensions: string[];
    meta: 'local' | `http${'s' | ''}://${string}/`;
    vite?: InlineConfig;
}

// @public (undocumented)
export class Utils {
    constructor(context: Context);
    appendSlash(str: string): string;
    // (undocumented)
    context: Context;
    getDepPath(start: PkgNode, end: PkgNode): PkgNode[];
    getLocalModuleExternal(lmn: string): RegExp[];
    getLocalModuleName(path: string): string | null;
    getLocalModulePath(lmn: string): string;
    getLocalPkgFromName(lmn: string): PkgNode;
    getLocalPkgFromPath(path: string): PkgNode;
    getLocalPkgNames(): string[];
    getLocalPkgPaths(): string[];
    getLocalPkgs(): PkgNode[];
    getMetaModule(mn: string): MetaModule;
    getNormalizedPath(ap: string): string;
    getPkgFromModuleId(mi: string): PkgNode;
    getPkgFromModuleName(mn: string): PkgNode;
    getPkgFromPublicPkgName(parent: PkgNode, ppn: string): PkgNode;
    getPkgFromSourceAndImporter(source: string, importer: string | PkgNode): PkgNode | null;
    getPkgId(lpn: string): string;
    getPkgName(specifier: string): string;
    getPublicPkgNameFromDepPath(dp: PkgNode[]): string;
    getPublicPkgNameFromImported(imported: string): string;
    getVendorModuleExternals(mn: string): string[];
    getVersionedPkgName(pkg: PkgNode): string;
    isBareSpecifier(specifier: string): boolean;
    isLocalModule(mn: string): boolean;
    isLocalPkg(mn: string): boolean;
    isPage(path: string): boolean;
    isRoutesModule(mn: string): boolean;
    isVendorModule(mn: string): boolean;
    remove(mn: string): void;
    resolve(...pss: string[]): string;
    shouldExternal(pkg: PkgNode): boolean;
    stringify(payload: any, replacer?: (key: string | number, value: any) => string | void): string;
}

// @public
export const write: TaskOptions<{}, never>;

// (No @packageDocumentation comment for this package)

```
